// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.0;

import "forge-std/Test.sol";
import "./VaultFactory.sol";

contract VaultTest is Test {
    VaultFactory factory;

    function setUp() public {
        factory = new VaultFactory();
    }

    function testVault() public {
        address vault = factory.createInstance(address(this));

        // Generated by github copilot
        // Vault(vault).unlock("A very strong secret password :)");

        bytes32 password = vm.load(vault, bytes32(uint256(1)));
        assertEq(password, "A very strong secret password :)");

        Vault(vault).unlock(password);

        assertTrue(factory.validateInstance(payable(address(vault)), address(this)));
    }
}
